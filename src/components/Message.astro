---
import type {Message} from "../util/ui_utils";
import {Icon} from "astro-icon/components";
interface Props {
    message: Message;
}

const props = Astro.props as Props;
const {message, type} = props.message;
---

<div class={`message ${type}`}>
    <p>{message}</p>
    <button class="close-message" title="uzavřít">
        <Icon name="iconoir:xmark" size={20} />
    </button>
</div>

<style>
    .message {
        padding: 15px;
        margin: 20px 0;
        border-radius: 4px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    [data-icon] {
        vertical-align: middle;
    }

    .success {
        background-color: #dff0d8;
        color: #3c763d;
        border: 1px solid #d6e9c6;
    }

    .error {
        background-color: #f2dede;
        color: #a94442;
        border: 1px solid #ebccd1;
    }

    .info {
        background-color: #d9edf7;
        color: #31708f;
        border: 1px solid #bce8f1;
    }

    .warning {
        background-color: #fcf8e3;
        color: #8a6d3b;
        border: 1px solid #faebcc;
    }

    .close-message {
        background: none;
        border: none;
        cursor: pointer;
        color: inherit;
    }
</style>

<script>
    const closeButtons = document.querySelectorAll('.close-message');

    closeButtons.forEach(button => {
        button.addEventListener('click', () => {
            const messageDiv = button.closest('.message') as HTMLDivElement;
            messageDiv.style.display = 'none';
        });
    });
</script>